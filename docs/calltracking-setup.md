# Настройка коллтрекинга

## Что уже сделано

На сайте установлена система динамической подмены номеров телефонов для отслеживания источников звонков.

### Как это работает

1. **Автоматическое определение источника трафика:**
   - Яндекс (поиск, реклама)
   - Google (поиск, реклама)
   - Социальные сети (VK, Telegram, Instagram, Facebook)
   - Прямые заходы (набор адреса в браузере)
   - UTM-метки (utm_source в URL)

2. **Динамическая подмена номеров:**
   - Для каждого источника можно назначить свой номер телефона
   - Номер меняется автоматически при загрузке страницы
   - Отслеживается в Яндекс.Метрике с указанием источника

3. **Отслеживание кликов:**
   - Каждый клик по телефону фиксируется в Метрике
   - Передаётся информация о месте клика (шапка, контакты, плавающая кнопка)
   - Передаётся источник трафика

## Настройка номеров для разных источников

### Вариант 1: Бесплатный (используй текущий номер)

Оставь один номер для всех источников. В Яндекс.Метрике ты будешь видеть:
- Откуда пришёл посетитель до звонка
- Какую кнопку нажал
- Сколько времени провёл на сайте

**Текущая настройка:** Один номер +7 (994) 064-54-74 для всех источников.

### Вариант 2: Платный коллтрекинг (подключи сервис)

Для автоматического отслеживания реальных звонков используй один из сервисов:

#### 1. **Calltouch** (от 3000₽/мес)
   - https://calltouch.ru
   - Отслеживание звонков с указанием источника
   - Запись разговоров
   - Интеграция с CRM

#### 2. **CoMagic** (от 2500₽/мес)
   - https://www.comagic.ru
   - Виртуальные номера для каждого канала
   - Аналитика звонков
   - Интеграция с Метрикой

#### 3. **Roistat** (от 5000₽/мес)
   - https://roistat.com
   - Полная аналитика с расчётом ROI
   - Коллтрекинг + сквозная аналитика

### Как подключить платный коллтрекинг:

1. Зарегистрируйся в одном из сервисов
2. Получи виртуальные номера для разных источников:
   - Номер для Яндекса
   - Номер для Google
   - Номер для соцсетей
   - Номер для прямых заходов
3. Отредактируй файл `src/utils/calltracking.ts`
4. Замени номера в массиве `callTrackingNumbers`:

\`\`\`typescript
const callTrackingNumbers: CallTrackingNumber[] = [
  {
    source: 'yandex',
    phone: '+79141234567',  // Номер из коллтрекинга для Яндекса
    formatted: '+7 (914) 123-45-67'
  },
  {
    source: 'google',
    phone: '+79141234568',  // Номер из коллтрекинга для Google
    formatted: '+7 (914) 123-45-68'
  },
  // ... и так далее
];
\`\`\`

## Отслеживание в Яндекс.Метрике

### События, которые уже настроены:

- `phone_click` — клик по телефону (передаётся location и source)
- `form_submit` — отправка формы заявки
- `whatsapp_click` — клик по WhatsApp
- `telegram_click` — клик по Telegram

### Как смотреть статистику:

1. Зайди на https://metrika.yandex.ru
2. Счётчик: 101026698
3. Перейди в **Отчёты → Стандартные отчёты → Содержание → События**
4. Увидишь все клики с указанием источника

## Что даёт коллтрекинг

✅ **Без платных сервисов (текущая настройка):**
- Видишь, откуда пришёл посетитель
- Видишь, что он кликнул по телефону
- НЕ видишь, состоялся ли реальный звонок

✅ **С платным сервисом:**
- Видишь источник каждого звонка
- Слушаешь записи разговоров
- Считаешь конверсию: клики → звонки → продажи
- Оптимизируешь рекламу по реальным продажам

## Рекомендация

**Начни с бесплатного варианта:**
1. Запусти сайт
2. Посмотри статистику в Метрике 1-2 недели
3. Если звонков много (50+/месяц) — подключай платный коллтрекинг
4. Если мало — используй текущую аналитику
